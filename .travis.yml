language: python
python:
  - "3.12"
dist: focal
install:
  - python3 -m pip install -r djangotutorial/requirements.txt
before_script:
  - python3 djangotutorial/manage.py migrate
  # - python3 djangotutorial/manage.py collectstatic --noinput
# only_create_app_version: "true"
script:
  - black --check .
  - flake8 .
  - coverage run --source=mysite_swe1_app,polls djangotutorial/manage.py test
after_script:
  - coveralls
  - cd djangotutorial
  - eb deploy